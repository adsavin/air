<?php eval("?>".base64_decode("PD9waHAKCmNsYXNzIEJpbGxTYWxlIGV4dGVuZHMgQ0FjdGl2ZVJlY29yZCB7CgogICAgcHJpdmF0ZSAkU1VNX0FMTDsKCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIG1vZGVsKCRjbGFzc05hbWUgPSBfX0NMQVNTX18pIHsKICAgICAgICByZXR1cm4gcGFyZW50Ojptb2RlbCgkY2xhc3NOYW1lKTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gdGFibGVOYW1lKCkgewogICAgICAgIHJldHVybiAndGJfYmlsbF9zYWxlJzsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gYXR0cmlidXRlTGFiZWxzKCkgewogICAgICAgIHJldHVybiBhcnJheSgKICAgICAgICAgICAgJ2JpbGxfc2FsZV9pZCcgPT4gJ+C4o+C4q+C4seC4quC4muC4tOC4pScsCiAgICAgICAgICAgICdiaWxsX3NhbGVfY3JlYXRlZF9kYXRlJyA9PiAn4Lin4Lix4LiZ4LiX4Li14LmI4LiX4Liz4Lij4Liy4Lii4LiB4Liy4LijJywKICAgICAgICAgICAgJ2JpbGxfc2FsZV9zdGF0dXMnID0+ICfguKrguJbguLLguJnguLDguJrguLTguKUnLAogICAgICAgICAgICAnbWVtYmVyX2lkJyA9PiAn4Liq4Lih4Liy4LiK4Li04LiBJywKICAgICAgICAgICAgJ2JpbGxfc2FsZV92YXQnID0+ICdWQVQnLAogICAgICAgICAgICAndXNlcl9pZCcgPT4gJ+C4nuC4meC4seC4geC4h+C4suC4meC4guC4suC4oicsCiAgICAgICAgICAgICdicmFuY2hfaWQnID0+ICfguKrguLLguILguLInLAogICAgICAgICAgICAnYmlsbF9zYWxlX3BheV9kYXRlJyA9PiAn4Lin4Lix4LiZ4LiX4Li14LmI4LiK4Liz4Lij4Liw4LmA4LiH4Li04LiZL+C4o+C4seC4muC4muC4tOC4pScsCiAgICAgICAgICAgICdiaWxsX3NhbGVfZHJvcF9iaWxsX2RhdGUnID0+ICfguKfguLHguJnguJfguLXguYjguKfguLLguIfguJrguLTguKUnCiAgICAgICAgKTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gcmVsYXRpb25zKCkgewogICAgICAgIHJldHVybiBhcnJheSgKICAgICAgICAgICAgJ21lbWJlcicgPT4gYXJyYXkoc2VsZjo6QkVMT05HU19UTywgJ01lbWJlcicsICdtZW1iZXJfaWQnKSwKICAgICAgICAgICAgJ3VzZXInID0+IGFycmF5KHNlbGY6OkJFTE9OR1NfVE8sICdVc2VyJywgJ3VzZXJfaWQnKSwKICAgICAgICAgICAgJ2JyYW5jaCcgPT4gYXJyYXkoc2VsZjo6QkVMT05HU19UTywgJ0JyYW5jaCcsICdicmFuY2hfaWQnKQogICAgICAgICk7CiAgICB9CgogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBzdW1Ub3RhbFByaWNlKCkgewogICAgICAgICRiaWxsU2FsZURldGFpbCA9IFlpaTo6YXBwKCktPnNlc3Npb25bJ2JpbGxTYWxlRGV0YWlsJ107CiAgICAgICAgJHN1bSA9IDA7CgogICAgICAgIGlmICghZW1wdHkoJGJpbGxTYWxlRGV0YWlsKSkgewogICAgICAgICAgICBmb3IgKCRpID0gMDsgJGkgPCBjb3VudCgkYmlsbFNhbGVEZXRhaWwpOyAkaSsrKSB7CiAgICAgICAgICAgICAgICAkcm93ID0gJGJpbGxTYWxlRGV0YWlsWyRpXTsKICAgICAgICAgICAgICAgICRzdW0gKz0gKCRyb3dbJ3Byb2R1Y3RfcHJpY2UnXSAqICRyb3dbJ3Byb2R1Y3RfcXR5J10pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiAkc3VtOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBidXR0b25NYW5hZ2VCaWxsKCRkYXRhLCAkcm93KSB7CiAgICAgICAgJHRleHQgPSAkZGF0YS0+YmlsbF9zYWxlX2lkOwogICAgICAgICR1cmwgPSBhcnJheSgKCQkJCQkiQmFzaWMvQmlsbFNhbGVEZXRhaWwiLAoJCQkJCSJiaWxsX3NhbGVfaWQiID0+ICRkYXRhLT5iaWxsX3NhbGVfaWQKCQkJCSk7CgogICAgICAgIHJldHVybiBDSHRtbDo6bGluaygkdGV4dCwgJHVybCwgYXJyYXkoCiAgICAgICAgCSJjbGFzcyIgPT4gImJ0biBidG4taW5mbyIKICAgICAgICApKTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0U3RhdHVzKCkgewogICAgICAgIGlmICgkdGhpcy0+YmlsbF9zYWxlX3N0YXR1cyA9PSAncGF5JykgewogICAgICAgICAgICByZXR1cm4gJ+C4iuC4s+C4o+C4sOC5geC4peC5ieC4pyc7CiAgICAgICAgfQogICAgICAgIHJldHVybiAn4Lij4Lit4LiK4Liz4Lij4LiwJzsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gYnV0dG9uQmlsbERyb3BEZXRhaWwoJGRhdGEsICRyb3cpIHsKICAgICAgICAkdGV4dCA9ICRkYXRhLT5iaWxsX3NhbGVfaWQ7CiAgICAgICAgJHVybCA9IGFycmF5KAoJCQkJCSJCYXNpYy9CaWxsRHJvcERldGFpbCIsCgkJCQkJImJpbGxfc2FsZV9pZCIgPT4gJGRhdGEtPmJpbGxfc2FsZV9pZAoJCQkJKTsKCiAgICAgICAgcmV0dXJuIENIdG1sOjpsaW5rKCR0ZXh0LCAkdXJsLCBhcnJheSgKICAgICAgICAJImNsYXNzIiA9PiAiYnRuIGJ0bi1pbmZvIgogICAgICAgICkpOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRTdW0oJHNob3dfY29tbWEgPSB0cnVlKSB7CiAgICAgICAgJHN1bSA9IFlpaTo6YXBwKCktPmRiLT5jcmVhdGVDb21tYW5kKCkKCQkgICAgLT5zZWxlY3QoJ1NVTShiaWxsX3NhbGVfZGV0YWlsX3F0eSAqIGJpbGxfc2FsZV9kZXRhaWxfcHJpY2UpIEFTIG15X3N1bScpCiAgICAgICAgICAgIC0+ZnJvbSgndGJfYmlsbF9zYWxlX2RldGFpbCcpCiAgICAgICAgICAgIC0+d2hlcmUoJ2JpbGxfaWQgPSAnIC4gJHRoaXMtPmJpbGxfc2FsZV9pZCkKICAgICAgICAgICAgLT5xdWVyeVJvdygpOwoKCQlpZiAoJHNob3dfY29tbWEpIHsKICAgICAgCQlyZXR1cm4gbnVtYmVyX2Zvcm1hdCgkc3VtWydteV9zdW0nXSk7CiAgICAgICAgfQoKICAgICAgcmV0dXJuICRzdW1bJ215X3N1bSddOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRTdW1SZXBvcnQoJGRhdGEsICRyb3cpIHsKICAgICAgICAkY3JpdGVyaWEgPSBuZXcgQ0RiQ3JpdGVyaWEoKTsKICAgICAgICAkY3JpdGVyaWEtPnNlbGVjdCA9ICdTVU0oYmlsbF9zYWxlX2RldGFpbF9wcmljZSAqIGJpbGxfc2FsZV9kZXRhaWxfcXR5KSBBUyBTVU1fQUxMJzsKICAgICAgICAkY3JpdGVyaWEtPmpvaW4gPSAnSU5ORVIgSk9JTiB0Yl9iaWxsX3NhbGVfZGV0YWlsIEFTIGMgT04gYy5iaWxsX2lkID0gdC5iaWxsX3NhbGVfaWQnOwogICAgICAgICRjcml0ZXJpYS0+Y29uZGl0aW9uID0gJ2JpbGxfc2FsZV9wYXlfZGF0ZSBJUyBOVUxMJzsKICAgICAgICAkY3JpdGVyaWEtPmNvbmRpdGlvbiA9ICdiaWxsX3NhbGVfZHJvcF9iaWxsX2RhdGUgSVMgTlVMTCc7CiAgICAgICAgJGNyaXRlcmlhLT5jb21wYXJlKCJ0Lm1lbWJlcl9pZCIsICRkYXRhLT5tZW1iZXJfaWQpOwogICAgICAgICRjcml0ZXJpYS0+Z3JvdXAgPSAndC5tZW1iZXJfaWQnOwoKICAgICAgICAkcmVzdWx0ID0gQmlsbFNhbGU6Om1vZGVsKCktPmZpbmQoJGNyaXRlcmlhKTsKCiAgICAgICAgcmV0dXJuIG51bWJlcl9mb3JtYXQoJHJlc3VsdC0+U1VNX0FMTCwgMik7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGdldFN1bVByaWNlKCRtZW1iZXJfaWQsICRmcm9tLCAkdG8pIHsKICAgICAgICAkc3FsID0gIgogICAgICAgICAgICBzZWxlY3Qgc3VtKGJpbGxfc2FsZV9kZXRhaWxfcHJpY2UpIEFTIHRvdGFsX3ByaWNlCiAgICAgICAgICAgIGZyb20gdGJfYmlsbF9zYWxlX2RldGFpbAogICAgICAgICAgICBpbm5lciBqb2luIHRiX2JpbGxfc2FsZSBvbiB0Yl9iaWxsX3NhbGUuYmlsbF9zYWxlX2lkID0gdGJfYmlsbF9zYWxlX2RldGFpbC5iaWxsX2lkCiAgICAgICAgICAgIHdoZXJlIG1lbWJlcl9pZCA9ICRtZW1iZXJfaWQKICAgICAgICAgICAgLS0gQU5EIFlFQVIoYmlsbF9zYWxlX2NyZWF0ZWRfZGF0ZSkgPj0gWUVBUignJGZyb20nKQogICAgICAgICAgICAtLSBBTkQgTU9OVEgoYmlsbF9zYWxlX2NyZWF0ZWRfZGF0ZSkgPj0gTU9OVEgoJyRmcm9tJykKICAgICAgICAgICAgLS0gQU5EIERBWShiaWxsX3NhbGVfY3JlYXRlZF9kYXRlKSA+PSBEQVkoJyRmcm9tJykKICAgICAgICAgICAgLS0gQU5EIFlFQVIoYmlsbF9zYWxlX2NyZWF0ZWRfZGF0ZSkgPD0gWUVBUignJHRvJykKICAgICAgICAgICAgLS0gQU5EIE1PTlRIKGJpbGxfc2FsZV9jcmVhdGVkX2RhdGUpIDw9IE1PTlRIKCckdG8nKQogICAgICAgICAgICAtLSBBTkQgREFZKGJpbGxfc2FsZV9jcmVhdGVkX2RhdGUpIDw9IERBWSgnJHRvJykKICAgICAgICAiOwogICAgICAgICRzdW0gPSBZaWk6OmFwcCgpLT5kYi0+Y3JlYXRlQ29tbWFuZCgkc3FsKS0+cXVlcnlSb3coKTsKCiAgICAgICAgcmV0dXJuICRzdW1bJ3RvdGFsX3ByaWNlJ107CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGdldFN1bVByaWNlQnlEYXlNb250aFllYXIoJGQsICRtLCAkeSkgewogICAgICAgICRzcWwgPSAiCiAgICAgICAgICBTRUxFQ1QgU1VNKGJpbGxfc2FsZV9kZXRhaWxfcHJpY2UgKiBiaWxsX3NhbGVfZGV0YWlsX3F0eSkgQVMgbW9uZXkKICAgICAgICAgIEZST00gdGJfYmlsbF9zYWxlX2RldGFpbAogICAgICAgICAgTEVGVCBKT0lOIHRiX2JpbGxfc2FsZSBPTiB0Yl9iaWxsX3NhbGVfZGV0YWlsLmJpbGxfaWQgPSB0Yl9iaWxsX3NhbGUuYmlsbF9zYWxlX2lkCiAgICAgICAgICBXSEVSRQogICAgICAgICAgICBNT05USChiaWxsX3NhbGVfY3JlYXRlZF9kYXRlKSA9ICRtCiAgICAgICAgICAgIEFORCBZRUFSKGJpbGxfc2FsZV9jcmVhdGVkX2RhdGUpID0gJHkKICAgICAgICAgICAgQU5EIERBWShiaWxsX3NhbGVfY3JlYXRlZF9kYXRlKSA9ICRkCiAgICAgICAgICAgIEFORCBiaWxsX3NhbGVfc3RhdHVzIElOKCdwYXknLCAnY3JlZGl0JykKICAgICAgICAiOwogICAgICAgICRycyA9IFlpaTo6YXBwKCktPmRiLT5jcmVhdGVDb21tYW5kKCRzcWwpLT5xdWVyeVJvdygpOwogICAgICAgIAogICAgICAgIHJldHVybiAkcnNbJ21vbmV5J107CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGdldFN1bVByaWNlQnlNb250aFllYXIoJG0sICR5KSB7CiAgICAgICAgJHNxbCA9ICIKICAgICAgICAgIFNFTEVDVCBTVU0oYmlsbF9zYWxlX2RldGFpbF9wcmljZSAqIGJpbGxfc2FsZV9kZXRhaWxfcXR5KSBBUyBtb25leQogICAgICAgICAgRlJPTSB0Yl9iaWxsX3NhbGVfZGV0YWlsCiAgICAgICAgICBMRUZUIEpPSU4gdGJfYmlsbF9zYWxlIE9OIHRiX2JpbGxfc2FsZV9kZXRhaWwuYmlsbF9pZCA9IHRiX2JpbGxfc2FsZS5iaWxsX3NhbGVfaWQKICAgICAgICAgIFdIRVJFCiAgICAgICAgICAgIE1PTlRIKGJpbGxfc2FsZV9jcmVhdGVkX2RhdGUpID0gJG0KICAgICAgICAgICAgQU5EIFlFQVIoYmlsbF9zYWxlX2NyZWF0ZWRfZGF0ZSkgPSAkeQogICAgICAgICAgICBBTkQgYmlsbF9zYWxlX3N0YXR1cyBJTigncGF5JywgJ2NyZWRpdCcpCiAgICAgICAgIjsKICAgICAgICAkcnMgPSBZaWk6OmFwcCgpLT5kYi0+Y3JlYXRlQ29tbWFuZCgkc3FsKS0+cXVlcnlSb3coKTsKICAgICAgICAKICAgICAgICByZXR1cm4gJHJzWydtb25leSddOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRTdW1QcmljZUJ5TW9udGhZZWFyR3JvdXBQcm9kdWN0SWQoJG0sICR5LCAkZ3JvdXBfcHJvZHVjdF9pZCkgewogICAgICAgICRtID0gKGludCkgJG07CiAgICAgICAgJHkgPSAoaW50KSAkeTsKCiAgICAgICAgJHNxbCA9ICIKICAgICAgICAgIFNFTEVDVCBTVU0oYmlsbF9zYWxlX2RldGFpbF9wcmljZSAqIGJpbGxfc2FsZV9kZXRhaWxfcXR5KSBBUyBtb25leQogICAgICAgICAgRlJPTSB0Yl9iaWxsX3NhbGVfZGV0YWlsCiAgICAgICAgICBMRUZUIEpPSU4gdGJfYmlsbF9zYWxlIE9OIHRiX2JpbGxfc2FsZV9kZXRhaWwuYmlsbF9pZCA9IHRiX2JpbGxfc2FsZS5iaWxsX3NhbGVfaWQKICAgICAgICAgIExFRlQgSk9JTiB0Yl9wcm9kdWN0IE9OIHRiX3Byb2R1Y3QucHJvZHVjdF9jb2RlID0gdGJfYmlsbF9zYWxlX2RldGFpbC5iaWxsX3NhbGVfZGV0YWlsX2JhcmNvZGUKICAgICAgICAgIFdIRVJFCiAgICAgICAgICAgIE1PTlRIKGJpbGxfc2FsZV9jcmVhdGVkX2RhdGUpID0gJG0KICAgICAgICAgICAgQU5EIFlFQVIoYmlsbF9zYWxlX2NyZWF0ZWRfZGF0ZSkgPSAkeQogICAgICAgICAgICBBTkQgYmlsbF9zYWxlX3N0YXR1cyBJTigncGF5JywgJ2NyZWRpdCcpCiAgICAgICAgICAgIEFORCB0Yl9wcm9kdWN0Lmdyb3VwX3Byb2R1Y3RfaWQgPSAkZ3JvdXBfcHJvZHVjdF9pZAogICAgICAgICI7CiAgICAgICAgJHJzID0gWWlpOjphcHAoKS0+ZGItPmNyZWF0ZUNvbW1hbmQoJHNxbCktPnF1ZXJ5Um93KCk7CiAgICAgICAgCiAgICAgICAgcmV0dXJuICRyc1snbW9uZXknXTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0U3VtUHJpY2VCeU1vbnRoWWVhclVzZXJJZCgkbSwgJHksICR1c2VyX2lkKSB7CiAgICAgICAgJHNxbCA9ICIKICAgICAgICAgIFNFTEVDVCBTVU0oYmlsbF9zYWxlX2RldGFpbF9wcmljZSAqIGJpbGxfc2FsZV9kZXRhaWxfcXR5KSBBUyBtb25leQogICAgICAgICAgRlJPTSB0Yl9iaWxsX3NhbGVfZGV0YWlsCiAgICAgICAgICBMRUZUIEpPSU4gdGJfYmlsbF9zYWxlIE9OIHRiX2JpbGxfc2FsZV9kZXRhaWwuYmlsbF9pZCA9IHRiX2JpbGxfc2FsZS5iaWxsX3NhbGVfaWQKICAgICAgICAgIFdIRVJFCiAgICAgICAgICAgIE1PTlRIKGJpbGxfc2FsZV9jcmVhdGVkX2RhdGUpID0gJG0KICAgICAgICAgICAgQU5EIFlFQVIoYmlsbF9zYWxlX2NyZWF0ZWRfZGF0ZSkgPSAkeQogICAgICAgICAgICBBTkQgYmlsbF9zYWxlX3N0YXR1cyBJTigncGF5JywgJ2NyZWRpdCcpCiAgICAgICAgICAgIEFORCB1c2VyX2lkID0gJHVzZXJfaWQKICAgICAgICAiOwogICAgICAgICRycyA9IFlpaTo6YXBwKCktPmRiLT5jcmVhdGVDb21tYW5kKCRzcWwpLT5xdWVyeVJvdygpOwogICAgICAgIAogICAgICAgIHJldHVybiAkcnNbJ21vbmV5J107CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGdldFN1bVByaWNlQnlZZWFyQW5kTWVtYmVySWQoJHksICRtZW1iZXJfaWQpIHsKICAgICAgICAkc3FsID0gIgogICAgICAgICAgU0VMRUNUIFNVTShiaWxsX3NhbGVfZGV0YWlsX3ByaWNlICogYmlsbF9zYWxlX2RldGFpbF9xdHkpIEFTIG1vbmV5CiAgICAgICAgICBGUk9NIHRiX2JpbGxfc2FsZV9kZXRhaWwKICAgICAgICAgIExFRlQgSk9JTiB0Yl9iaWxsX3NhbGUgT04gdGJfYmlsbF9zYWxlX2RldGFpbC5iaWxsX2lkID0gdGJfYmlsbF9zYWxlLmJpbGxfc2FsZV9pZAogICAgICAgICAgV0hFUkUKICAgICAgICAgICAgWUVBUihiaWxsX3NhbGVfY3JlYXRlZF9kYXRlKSA9ICR5CiAgICAgICAgICAgIEFORCBiaWxsX3NhbGVfc3RhdHVzIElOKCdwYXknLCAnY3JlZGl0JykKICAgICAgICAgICAgQU5EIG1lbWJlcl9pZCA9ICRtZW1iZXJfaWQKICAgICAgICAiOwogICAgICAgICRycyA9IFlpaTo6YXBwKCktPmRiLT5jcmVhdGVDb21tYW5kKCRzcWwpLT5xdWVyeVJvdygpOwogICAgICAgIAogICAgICAgIHJldHVybiAkcnNbJ21vbmV5J107CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGdldE1lbWJlck5hbWUoKSB7CiAgICAgICAgJG1lbWJlcl9uYW1lID0gQCR0aGlzLT5tZW1iZXItPm1lbWJlcl9uYW1lOwoKICAgICAgICBpZiAoIWVtcHR5KCR0aGlzLT5jdXN0b21lcl9uYW1lKSkgewogICAgICAgICAgICByZXR1cm4gJHRoaXMtPmN1c3RvbWVyX25hbWU7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiAkbWVtYmVyX25hbWU7CiAgICB9Cgp9Cg==")); ?>